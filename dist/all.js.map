{"version":3,"sources":["config/passport.js","Controllers/bookController.js","data/schema.js","routes/adminRoutes.js","routes/authRoutes.js","routes/bookRoutes.js","routes/bookroutesMsSQL.js","routes/dataRoutes.js","Services/goodreadsService.js","config/strategies/local.strategy.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["var passport = require('passport');\r\n\r\nmodule.exports = function (app) {\r\n    app.use(passport.initialize());\r\n    app.use(passport.session());\r\n    passport.serializeUser(function (user, done) {\r\n       \r\n        done(null, user);\r\n    });\r\n    passport.deserializeUser(function (user, done) {\r\n\r\n        done(null, user);\r\n    });\r\n    require('./strategies/local.strategy.js')();\r\n};","var mongodb = require('mongodb').MongoClient;\r\nvar objectID = require('mongodb').ObjectID;\r\n\r\nvar bookController = function (bookService, nav) {\r\n\r\n    var middleware = function (req, res, next) {\r\n        //Secure all routes\r\n        if (!req.user) {\r\n            //    res.redirect('/');\r\n        }\r\n        next();\r\n    };\r\n\r\n    var getIndex = function (req, res) {\r\n        var url = 'mongodb://localhost:27017/libraryApp';\r\n        mongodb.connect(url, function (err, db) {\r\n            var collection = db.collection('books');\r\n            collection.find({}).toArray(function (err, results) {\r\n\r\n                res.render('bookListView', {\r\n                    Title: 'Books',\r\n                    nav: nav,\r\n                    books: results\r\n\r\n                });\r\n\r\n            });\r\n        });\r\n    };\r\n\r\n    var getById = function (req, res) {\r\n        var id = new objectID(req.params.id);\r\n        var url = 'mongodb://localhost:27017/libraryApp';\r\n        mongodb.connect(url, function (err, db) {\r\n            var collection = db.collection('books');\r\n            collection.findOne({\r\n                    _id: id\r\n                },\r\n                function (err, results) {\r\n\r\n                    if (results === null) {\r\n                        res.status(404).send('Not Found');\r\n                    } else {\r\n\r\n                        if (results.bookId) {\r\n                            bookService.getBookById(results.bookId,\r\n                                function (err, book) {\r\n                                    results.book = book;\r\n\r\n                                    res.render('bookView', {\r\n                                        Title: 'Books',\r\n                                        nav: nav,\r\n                                        book: results\r\n                                    });\r\n                                });\r\n                        } else {\r\n                            res.render('bookView', {\r\n                                Title: 'Books',\r\n                                nav: nav,\r\n                                book: results\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                });\r\n\r\n        });\r\n    };\r\n\r\n    return {\r\n        getIndex: getIndex,\r\n        getById: getById,\r\n        middleware: middleware\r\n    };\r\n};\r\n\r\n\r\nmodule.exports = bookController;","/*jshint esnext: true */\r\n//var GraphQLSchema = require(\"graphql\").GraphQLSchema;\r\n//var GraphQLObjectType = require(\"graphql\").GraphQLObjectType;\r\n//var GraphQLInt = require(\"graphql\").GraphQLInt;\r\nimport {\r\n  GraphQLObjectType,\r\n  GraphQLNonNull,\r\n  GraphQLSchema,\r\n  GraphQLInt\r\n} from 'graphql';\r\n\r\n//import{\r\n//    GraphQLSchema,\r\n//    GraphQLObjectType,\r\n//     GraphQLInt\r\n//} from 'graphql';\r\n\r\n\r\nlet schema = new GraphQLSchema({\r\n    query: new GraphQLObjectType({\r\n        name: 'Query',\r\n        fields: () => ({\r\n            counter: {\r\n                type: GraphQLInt,\r\n                resolve( ) {\r\n                    return () => 42\r\n                }\r\n                \r\n            }\r\n        })\r\n    })\r\n    \r\n    //mutation: ...\r\n});\r\n\r\nexport default schema;","var express = require('express');\r\nvar adminRouter = express.Router();\r\nvar mongodb = require('mongodb').MongoClient;\r\n\r\nvar router = function (nav) {\r\n\r\n    var books = [\r\n    {\r\n        title: 'All the Light We Cannot See',\r\n        genre: 'Drama',\r\n        author: 'Anthony Doerr',\r\n        bookId: 18143977,\r\n        read: false\r\n    }, {\r\n        title: 'The Nightingale',\r\n        genre: 'Fiction',\r\n        author: 'Kristin Hannah',\r\n        bookId: 21853621,\r\n        read: false\r\n    }, {\r\n        title: 'The Revenant: A Novel of Revenge',\r\n        genre: 'Action',\r\n        author: 'Michael Punke',\r\n        read: false\r\n    }, {\r\n        title: 'Secrets of a Charmed Life',\r\n        genre: 'Romance',\r\n        author: 'Wilma Ready',\r\n        read: false\r\n    }, {\r\n        title: 'Romance: Dangerous Secrets',\r\n        genre: 'Romance',\r\n        author: 'Julia Regan',\r\n        read: false\r\n    }, {\r\n        title: 'Ordinary Grace',\r\n        genre: 'Fiction',\r\n        author: 'William Kent Krueger',\r\n        read: false\r\n     }];\r\n    \r\n    adminRouter.route('/addBooks')\r\n        .get(function (req, res) {\r\n            var url = 'mongodb://localhost:27017/libraryApp';\r\n            mongodb.connect(url, function (err, db) {\r\n                var collection = db.collection('books');\r\n                collection.insertMany(books, function (err, results) {\r\n                    res.send(results);\r\n                    db.close();\r\n                });\r\n            });\r\n            //res.send('inserting books');\r\n        });\r\n    return adminRouter;\r\n};\r\n\r\n\r\nmodule.exports = router;","var express = require('express');\r\nvar authRouter = express.Router();\r\nvar mongodb = require('mongodb').MongoClient;\r\nvar passport = require('passport');\r\n\r\nvar router = function (nav) {\r\n    authRouter.route('/signUp')\r\n        .post(function (req, res) {\r\n            var url = 'mongodb://localhost:27017/libraryApp';\r\n            mongodb.connect(url, function (err, db) {\r\n                var collection = db.collection('users');\r\n                var user = {\r\n                    username: req.body.username,\r\n                    password: req.body.password\r\n                };\r\n\r\n                collection.insert(user, function (err, results) {\r\n                    req.login(results.ops[0], function () {\r\n                        res.redirect('/Auth/profile');\r\n\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    authRouter.route('/signIn')\r\n        .post(passport.authenticate('local', {\r\n            failureRedirect: '/'\r\n        }), function (req, res) {\r\n            res.redirect('/Books');\r\n\r\n        }).get(function (req, res) {\r\n            res.send('hmmm......');\r\n        });\r\n\r\n    authRouter.route('/profile')\r\n        .all(function (req, res, next) {\r\n            if (!req.user) {\r\n                res.redirect('/');\r\n            }\r\n            next();\r\n        })\r\n        .get(function (req, res) {\r\n            res.json(req.user);\r\n        });\r\n\r\n\r\n\r\n\r\n    return authRouter;\r\n};\r\n\r\nmodule.exports = router;","var express = require('express');\r\nvar bookRouter = express.Router();\r\nvar mongodb = require('mongodb').MongoClient;\r\nvar objectID = require('mongodb').ObjectID;\r\n\r\nvar router = function (nav) {\r\n    var bookService = require('../Services/goodreadsService')();\r\n    var bookContoller = require('../controllers/bookController')(bookService, nav);\r\n    bookRouter.use(bookContoller.middleware);\r\n    //Secure all routes\r\n\r\n    bookRouter.route('/')\r\n        .get(bookContoller.getIndex);\r\n\r\n    bookRouter.route('/:id')\r\n        .get(bookContoller.getById);\r\n\r\n    return bookRouter;\r\n\r\n};\r\n\r\nmodule.exports = router;","var express = require('express');\r\nvar bookRouter = express.Router();\r\nvar sql = require('mssql');\r\n\r\nvar router = function (nav) {\r\n\r\nvar books = [\r\n    {\r\n        title: 'All the Light We Cannot See',\r\n        genre: 'Drama',\r\n        author: 'Anthony Doerr',\r\n        read: false\r\n        }, {\r\n        title: 'The Nightingale',\r\n        genre: 'Fiction',\r\n        author: 'Kristin Hannah',\r\n        read: false\r\n        }, {\r\n        title: 'The Revenant: A Novel of Revenge',\r\n        genre: 'Action',\r\n        author: 'Michael Punke',\r\n        read: false\r\n        }, {\r\n        title: 'Secrets of a Charmed Life',\r\n        genre: 'Romance',\r\n        author: 'Wilma Ready',\r\n        read: false\r\n        }, {\r\n        title: 'Romance: Dangerous Secrets',\r\n        genre: 'Romance',\r\n        author: 'Julia Regan',\r\n        read: false\r\n        }, {\r\n        title: 'Ordinary Grace',\r\n        genre: 'Fiction',\r\n        author: 'William Kent Krueger',\r\n        read: false\r\n        }];\r\n\r\nbookRouter.route('/')\r\n    .get(function (req, res) {\r\n        var request = new sql.Request();\r\n\r\n        request.query('select * from books', function (err, recordSet) {\r\n            res.render('bookListView', {\r\n                Title: 'Books',\r\n                nav: nav,\r\n                books: recordSet\r\n            });\r\n        });\r\n\r\n    });\r\n\r\nbookRouter.route('/:id')\r\n    .all(function (req, res, next) {\r\n        var id = req.params.id;\r\n        var ps = new sql.PreparedStatement();\r\n        ps.input('id', sql.Int);\r\n        ps.prepare('select * from books where id = @id', function (err) {\r\n            ps.execute({\r\n                id: req.params.id\r\n            }, function (err, recordSet) {\r\n                if (recordSet.length === 0) {\r\n                    res.status(404).send('Not Found');\r\n                } else {\r\n                    req.book = recordSet[0];\r\n                    next();\r\n                }\r\n            });\r\n        });\r\n    })\r\n.get(function (req, res) {\r\n\r\n    res.render('bookView', {\r\n        Title: 'Books',\r\n        nav: nav,\r\n        book: req.book\r\n    });\r\n\r\n});\r\n\r\n\r\nreturn bookRouter;\r\n};\r\n\r\nmodule.exports = router;","var express = require('express');\r\nvar dataRouter = express.Router();\r\nvar graphql = require(\"graphql\");\r\nvar GrapQLHTTP = require('express-graphql');\r\n\r\n\r\n  \r\nvar router = function (nav) {\r\n    dataRouter.route('/data')\r\n        .get(function(req, res){\r\n        \r\n    });\r\n};\r\n\r\nmodule.exports = router;","var http = require('http');\r\nvar xml2json = require('xml2js');\r\nvar parser = xml2json.Parser({\r\n    explicitArray: false\r\n});\r\n\r\nvar goodreadsService = function () {\r\n\r\n    var getBookById = function (id, cb) {\r\n        var options = {\r\n            host: 'www.goodreads.com',\r\n            path: '/book/show/' + id + '?format=xml&key=bJU4WwEpv8QaM42iR586YA'\r\n        };\r\n\r\n        var callback = function (response) {\r\n            var str = '';\r\n\r\n            response.on('data', function (chunk) {\r\n                str += chunk;\r\n            });\r\n\r\n            response.on('end', function () {\r\n                console.log(str);\r\n\r\n                parser.parseString(str, function (err, result) {\r\n                    cb(null, result.GoodreadsResponse.book);\r\n                });\r\n            });\r\n        };\r\n\r\n        http.request(options, callback).end();\r\n    };\r\n\r\n    return {\r\n        getBookById: getBookById\r\n    };\r\n};\r\n\r\nmodule.exports = goodreadsService;","var passport = require('passport'),\r\n    LocalStrategy = require('passport-local').Strategy,\r\n    mongodb = require('mongodb').MongoClient;\r\n\r\nmodule.exports = function () {\r\n    passport.use(new LocalStrategy({\r\n        usernameField: 'username',\r\n        passwordField: 'password'\r\n    },\r\n        function (username, password, done) {\r\n            var url = 'mongodb://localhost:27017/libraryApp';\r\n            mongodb.connect(url, function (err, db) {\r\n                var collection = db.collection('users');\r\n                collection.findOne({\r\n                    username: username\r\n                },\r\n                    function (err, results) {\r\n                        if (err === null) {\r\n                            if(results.password === password){\r\n                                var user = results;\r\n                                done(null, user);\r\n                            }\r\n                            else {\r\n                                done(null, false, {message: 'Bad Password'});\r\n                            }\r\n                        } else {\r\n                            console.log(err);\r\n                            done(null, false, {message: 'Username not found'});\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n        })\r\n    );\r\n};"],"sourceRoot":"/source/"}